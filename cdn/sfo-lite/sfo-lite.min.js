!function(){function getSecondsFromTradeTime(t){return 3600*t.split(":")[0]+60*t.split(":")[1]+1*t.split(":")[2]}function getTradeDateByDateShift(t,e){var n=new Date(t),i=new Date(1*n+864e5*e),r=i.getFullYear()+"",a=pad0(i.getMonth()+1),o=pad0(i.getDate());return t=r+"-"+a+"-"+o}var S={version:"0.0.16"};S.$=this.jQuery||this.Zepto||this.ender||this.$,S._=this._,S.B=this.Backbone,S.w2ui=this.w2ui;var pad0=function(t){return 10>1*t?"0"+1*t:""+1*t};S.URL_CONTRACT_LIST="/contract_list",S.URL_PRICE="/price",S.CT_STOCK="STOCK",S.CT_FUTURE="FUTURE",S.CT_OPTION="OPTION",S.CT_INDICATOR="INDICATOR",S.CT_MERGED="MERGED",S.OT_CALL="C",S.OT_PUT="P",S.PT_OPEN="OPEN",S.PT_HIGH="HIGH",S.PT_LOW="LOW",S.PT_CLOSE="CLOSE",S.PatternRegExpGeneric=/^.+$/,S.PatternContractType=/^(STOCK|FUTURE|OPTION)$/,S.PatternOptionType=/^(C|P)$/,S.PatternTickLength=/^(1S|15S|1M|2M|3M|5M|10M|15M|20M|30M|60M|1D|1W|1N|3N|1Y)$/,S.PatternTradeDate=/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/,S.PatternTradeTime=/^(([0-1][0-9])|(2[0-3])):[0-5][0-9]:[0-5][0-9]$/,S.PatternTradeDay=/^[0-6]$/,S.PatternUnderlyingAssetType=/^(STOCK|FUTURE)$/,S.PatternPriceType=/^(OPEN|HIGH|LOW|CLOSE)$/,S.AC_NATIVE="NATIVE",S.AC_CLONE="CLONE",S.AC_INDICATOR="INDICATOR",S.AC_MERGE="MERGE",S.AC_DATESHIFT="DATESHIFT",S._.isInteger=function(t){return S._.isNumber(t)&&Math.floor(t)==t},S.Collection2=S.B.Collection.extend({initialize:function(){this.tagNum=0,this.tagPool=S._.clone({})},getTag:function(){var t=this.tagNum;return this.tagNum++,t+""},getModelByTag:function(t){return this.tagPool[t+""]},add:function(t,e){var n=this;return t=S._.isArray(t)?t:[t],S._.each(t,function(t){var e=n.getTag();n.tagPool[e]=t,t.set("tag",e)}),S.B.Collection.prototype.add.call(this,t,e)},remove:function(t,e){var n=this;return t=S._.isArray(t)?t:[t],S._.each(t,function(t){var e=t.get("tag");delete n.tagPool[e],t.unset("tag")}),S.B.Collection.prototype.remove.call(this,t,e)},reset:function(t,e){return this.tagNum=0,this.tagPool=S._.clone({}),S.B.Collection.prototype.reset.call(this,t,e)}}),S.B.Validator.add("isNumber",function(t,e){return e===!1||S._.isNumber(t)},"Should be a number"),S.B.Validator.add("isInteger",function(t,e){return e===!1||S._.isInteger(t)},"Should be an integer"),S.indicator_function={},S.indicator_function.MA=function(t,e,n){var i=null;if(t.index()>=n-1){for(var r=0,a=-1*(n-1);0>=a;a++)r+=t.get(e,a);i=r/n}return i},S.indicator_function.BIAS=function(t,e,n){var i=null;if(t.index()>=n-1){var r=this.MA(t,e,n);i=100*((t.get(e)-r)/r)}return i},S.indicator_function.EMA=function(t,e,n){var i=null,r=t.get(e);if(0==t.index())i=r;else{var a=this.other(-1).get("ema");i=a+2/(1+n)*(r-a)}return i},S.indicator_function.HIGHEST=function(t,e,n){var i=null;if(t.index()>=n-1){i=t.get(e);for(var r=-1*(n-1);0>=r;r++)i=i>t.get(e,r)?i:t.get(e,r)}return i},S.indicator_function.LOWEST=function(t,e,n){var i=null;if(t.index()>=n-1){i=t.get(e);for(var r=-1*(n-1);0>=r;r++)i=i<t.get(e,r)?i:t.get(e,r)}return i},S.indicator_function.RSV=function(t,e){var n=null;if(t.index()>=e-1){var i=this.HIGHEST(t,"high",e),r=this.LOWEST(t,"low",e);n=t.get("volume")>0&&i>r?100*((t.get("close")-r)/(i-r)):t.index()==e-1?0:this.other(-1).get("rsv")}return n},S.indicator_function.KD_K=function(t,e){var n=null;if(t.index()>=e-1){var i=this.HIGHEST(t,"high",e),r=this.LOWEST(t,"low",e),a=t.index()==e-1?50:this.other(-1).get("k");if(t.get("volume")>0&&i>r){var o=this.RSV(t,e);n=2/3*a+1/3*o}else n=a}return n},S.indicator_function.KD_D=function(t,e){var n=null;if(t.index()>=e-1){var i=this.HIGHEST(t,"high",e),r=this.LOWEST(t,"low",e),a=t.index()==e-1?50:this.other(-1).get("d");if(t.get("volume")>0&&i>r){var o=this.KD_K(t,e);n=2/3*a+1/3*o}else n=a}return n},S.indicator_function.MACD_EMA_FAST=function(t,e){var n=null,i=(t.get("high")+t.get("low")+2*t.get("close"))/4;if(0==t.index())n=i;else{var r=this.other(-1).get("ema_fast");n=r+2/(1+e)*(i-r)}return n},S.indicator_function.MACD_EMA_SLOW=function(t,e){var n=null,i=(t.get("high")+t.get("low")+2*t.get("close"))/4;if(0==t.index())n=i;else{var r=this.other(-1).get("ema_slow");n=r+2/(1+e)*(i-r)}return n},S.indicator_function.MACD_DIF=function(t,e,n){var i=this.MACD_EMA_FAST(t,e)-this.MACD_EMA_SLOW(t,n);return i},S.indicator_function.MACD_DEM=function(t,e,n,i){var r=null,a=this.MACD_DIF(t,e,n);if(0==t.index())r=a;else{var o=this.other(-1).get("dem");r=o+2/(1+i)*(a-o)}return r},S.indicator_function.MACD_OSC=function(t,e,n,i){var r=this.MACD_DIF(t,e,n)-this.MACD_DEM(t,e,n,i);return r},S.indicator_function.STD=function(t,e,n){var i=null;if(t.index()>=n-1){for(var r=this.MA(t,e,n),a=0,o=-1*(n-1);0>=o;o++)a+=Math.pow(t.get(e,o)-r,2);i=Math.sqrt(a/(n-1))}return i},S.indicator_function.BB_UB=function(t,e,n){var i=null;if(t.index()>=e-1){var r=this.MA(t,"close",e),a=this.STD(t,"close",e);i=r+a*n}return i},S.indicator_function.BB_MB=function(t,e){var n=null;if(t.index()>=e-1){var i=this.MA(t,"close",e);n=i}return n},S.indicator_function.BB_LB=function(t,e,n){var i=null;if(t.index()>=e-1){var r=this.MA(t,"close",e),a=this.STD(t,"close",e);i=r-a*n}return i},S.IT_MA="MA",S.getIndicatorName_MA=function(t,e){var n=e.price_type,i=e.length,r={en:"MA("+t.get("contract_info").name.en+", "+n+", "+i+")",cht:"MA("+t.get("contract_info").name.cht+", "+n+", "+i+")"};return r},S.getIndicatorPrices_MA=function(t,e){var n=e.price_type,i=e.length,r=new S.Prices;return t.get("prices").each(function(t){r.add(new S.Price({trade_date:t.get("trade_date"),trade_time:t.get("trade_time")}));var e=r.getFinalPrice();e.set("ma",function(){return this.MA(t,n,i)})}),r},S.IT_BIAS="BIAS",S.getIndicatorName_BIAS=function(t,e){var n=e.price_type,i=e.length,r={en:"BIAS("+t.get("contract_info").name.en+", "+n+", "+i+")",cht:"BIAS("+t.get("contract_info").name.cht+", "+n+", "+i+")"};return r},S.getIndicatorPrices_BIAS=function(t,e){var n=e.price_type,i=e.length,r=new S.Prices;return t.get("prices").each(function(t){r.add(new S.Price({trade_date:t.get("trade_date"),trade_time:t.get("trade_time")}));var e=r.getFinalPrice();e.set("bias",function(){return this.BIAS(t,n,i)})}),r},S.IT_EMA="EMA",S.getIndicatorName_EMA=function(t,e){var n=e.price_type,i=e.length,r={en:"EMA("+t.get("contract_info").name.en+", "+n+", "+i+")",cht:"EMA("+t.get("contract_info").name.cht+", "+n+", "+i+")"};return r},S.getIndicatorPrices_EMA=function(t,e){var n=e.price_type,i=e.length,r=new S.Prices;return t.get("prices").each(function(t){r.add(new S.Price({trade_date:t.get("trade_date"),trade_time:t.get("trade_time")}));var e=r.getFinalPrice();e.set("ema",function(){return this.EMA(t,n,i)})}),r},S.IT_KD="KD",S.getIndicatorName_KD=function(t,e){var n=e.length,i=e.over_sold,r=e.over_bought,a={en:"KD("+t.get("contract_info").name.en+", "+n+", "+i+", "+r+")",cht:"KD("+t.get("contract_info").name.cht+", "+n+", "+i+", "+r+")"};return a},S.getIndicatorPrices_KD=function(t,e){var n=e.length,i=e.over_sold,r=e.over_bought,a=new S.Prices;return t.get("prices").each(function(t){a.add(new S.Price({trade_date:t.get("trade_date"),trade_time:t.get("trade_time")}));var e=a.getFinalPrice();e.set("over_sold",i),e.set("over_bought",r),e.set("rsv",function(){return this.RSV(t,n)}),e.set("k",function(){return this.KD_K(t,n)}),e.set("d",function(){return this.KD_D(t,n)})}),a},S.IT_MACD="MACD",S.getIndicatorName_MACD=function(t,e){var n=e.fast,i=e.slow,r=e.length,a={en:"MACD("+t.get("contract_info").name.en+", "+n+", "+i+", "+r+")",cht:"MACD("+t.get("contract_info").name.cht+", "+n+", "+i+", "+r+")"};return a},S.getIndicatorPrices_MACD=function(t,e){var n=e.fast,i=e.slow,r=e.length,a=new S.Prices;return t.get("prices").each(function(t){a.add(new S.Price({trade_date:t.get("trade_date"),trade_time:t.get("trade_time")}));var e=a.getFinalPrice();e.set("ema_fast",function(){return this.MACD_EMA_FAST(t,n)}),e.set("ema_slow",function(){return this.MACD_EMA_SLOW(t,i)}),e.set("dif",function(){return this.MACD_DIF(t,n,i)}),e.set("dem",function(){return this.MACD_DEM(t,n,i,r)}),e.set("osc",function(){return this.MACD_OSC(t,n,i,r)})}),a},S.IT_BB="BB",S.getIndicatorName_BB=function(t,e){var n=e.length,i=e.band_width,r={en:"BB("+t.get("contract_info").name.en+", "+n+", "+i+")",cht:"BB("+t.get("contract_info").name.cht+", "+n+", "+i+")"};return r},S.getIndicatorPrices_BB=function(t,e){var n=e.length,i=e.band_width,r=new S.Prices;return t.get("prices").each(function(t){r.add(new S.Price({trade_date:t.get("trade_date"),trade_time:t.get("trade_time")}));var e=r.getFinalPrice();e.set("upper_band",function(){return this.BB_UB(t,n,i)}),e.set("middle_band",function(){return this.BB_MB(t,n)}),e.set("lower_band",function(){return this.BB_LB(t,n,i)})}),r},S.getIndicatorName=function(t,e,n){var i="getIndicatorName_"+e;return S[i](t,n)},S.getIndicatorPrices=function(t,e,n){var i="getIndicatorPrices_"+e;return S[i](t,n)},S.Data=S.B.Model.extend({}),S.Datas=S.B.Collection.extend({model:S.Data}),S.Price=S.B.Model.extend({defaults:{trade_date:"1970-01-01",trade_time:"00:00:00"},validation:{trade_date:{required:!0,format:S.PatternTradeDate},trade_time:{required:!0,format:S.PatternTradeTime}},index:function(){return S._.isUndefined(this.collection)?null:this.collection.indexOf(this)},isFinal:function(){return S._.isUndefined(this.collection)?!1:this.index()==this.collection.length-1},other:function(t){if(S._.isNumber(t)&&0!=t){if(S._.isUndefined(this.collection))return null;var e=this.index();return e+=t,0>e||e>this.collection.length-1?null:this.collection.at(e)}return this},get:function(t,e){if(S._.isNumber(e)&&0!=e){if(S._.isUndefined(this.collection))return null;var n=this.other(e);return S._.isNull(n)?null:n.get(t)}var i=S.B.Model.prototype.get.call(this,t);return S._.isUndefined(i)?i=null:S._.isFunction(i)&&(i=i.call(this),this.isFinal()||this.set(t,i,{silent:!0})),i},toJSON:function(){var t=this;return S._.object(S._.map(this.keys(),function(e){return[e,t.get(e)]}))},values:function(){return S._.values(this.toJSON())},pairs:function(){return S._.pairs(this.toJSON())}}),S._.extend(S.Price.prototype,S.indicator_function),S.Prices=S.B.Collection.extend({model:S.Price,initialize:function(){this.tradeDateTimePool=S._.clone({})},getPriceByTradeDateTime:function(t){return this.tradeDateTimePool[t]},add:function(t,e){var n=this;return t=S._.isArray(t)?t:[t],t=S._.map(t,function(t){return t instanceof S.Price?t:new S.Price(t)}),S._.each(t,function(t){var e=t.get("trade_date")+" "+t.get("trade_time");n.tradeDateTimePool[e]=t}),S.B.Collection.prototype.add.call(this,t,e)},remove:function(t,e){var n=this;return t=S._.isArray(t)?t:[t],S._.each(t,function(t){var e=t.get("trade_date")+" "+t.get("trade_time");delete n.tradeDateTimePool[e]}),S.B.Collection.prototype.remove.call(this,t,e)},reset:function(t,e){return this.tradeDateTimePool=S._.clone({}),S.B.Collection.prototype.reset.call(this,t,e)},getTradeDateTimeArray:function(){var t=this.map(function(t){return t.get("trade_date")+" "+t.get("trade_time")});return t},getFinalPrice:function(){return this.at(this.length-1)}}),S.Contract=S.B.Model.extend({getMergedInfoArray:function(t,e){return S._.map(t,function(t){var n=t.contract.get("contract_info")[e];return n=S._.isUndefined(n)?null:n})},getMergedPrices:function(t,e){var n=S._.map(e,function(t){return t.prices.getTradeDateTimeArray()}),i=S._.sortBy(S._.uniq(S._.flatten(n)),function(t){return 1*new Date(t)}),r=new S.Prices;return S._.each(i,function(n){var i=n.split(" ")[0],a=n.split(" ")[1],o=S._.reduce(e,function(e,r){var o=r.prices.getPriceByTradeDateTime(n);if(S._.isUndefined(o))return new S.Price(S._.extend({trade_date:i,trade_time:a},S._.object(S._.map(t,function(t){return[t,null]}))));S._.isNull(e)&&(e=new S.Price(S._.extend({trade_date:i,trade_time:a},S._.object(S._.map(t,function(t){return[t,0]})))));for(var c=0;c<t.length;c++){var s=e.get(t[c]),d=o.get(r.fields[c]);S._.isNull(s)||S._.isNull(d)?e.set(t[c],null):e.set(t[c],s+d*r.factor)}return e},null);r.add(o)}),r},loadNative:function(t){var e={exchange:"^"+t.exchange+"$",contract_type:"^"+t.contract_type+"$",contract_name:"^"+t.contract_name+"$"};switch(t.contract_type){case S.CT_STOCK:break;case S.CT_FUTURE:e.contract_date="^"+t.contract_date+"$";break;case S.CT_OPTION:e.contract_date="^"+t.contract_date+"$",e.contract_price_begin=t.contract_price,e.contract_price_end=t.contract_price,e.option_type="^"+t.option_type+"$";break;default:return!1}var n=new S.Datas;if(n.url=S.URL_CONTRACT_LIST,n.fetch({data:{filter:JSON.stringify([e])},async:!1,reset:!0}),n.size()<1)return!1;var i=S._.extend(n.toJSON()[0],t);return this.set("contract_info",i),this.set("prices",new S.Prices),this.get("prices").url=S.URL_PRICE,this.get("prices").fetch({data:t,async:!1,reset:!0}),!0},loadCloned:function(t){var e=S._.clone(t.get("contract_info")),n=new S.Prices;t.get("prices").each(function(t){var e=new S.Price(t.toJSON());n.add(e)}),this.set("contract_info",e),this.set("prices",n)},loadIndicator:function(t,e,n){var i=S.getIndicatorName(t,e,n),r=S._.pick(t.get("contract_info"),"tick_length","trade_day_begin","trade_day_end","trade_date_begin","trade_date_end","trade_time_begin","trade_time_end","trade_date_final","trade_time_final"),a=S._.extend({name:i,contract_type:S.CT_INDICATOR,indicator_type:e,indicator_param:n},r);this.set("contract_info",a),this.set("prices",S.getIndicatorPrices(t,e,n))},loadMerged:function(t,e){var n=[],i=[],r=[];S._.each(e,function(t){var e=t.contract,a=t.factor;n.push("("+e.get("contract_info").name.en+")*"+a),i.push("("+e.get("contract_info").name.cht+")*"+a),r.push({prices:e.get("prices"),factor:a,fields:t.fields})});var a={en:n.join(" + "),cht:i.join(" + ")},o={name:a,contract_type:S.CT_MERGED,tick_length:e[0].contract.get("contract_info").tick_length};o.trade_day_begin=S._.min(this.getMergedInfoArray(e,"trade_day_begin")),o.trade_day_end=S._.max(this.getMergedInfoArray(e,"trade_day_end")),o.trade_date_begin=S._.sortBy(this.getMergedInfoArray(e,"trade_date_begin"),function(t){return 1*new Date(t)})[0],o.trade_date_end=S._.sortBy(this.getMergedInfoArray(e,"trade_date_end"),function(t){return-1*new Date(t)})[0],o.trade_time_begin=S._.sortBy(this.getMergedInfoArray(e,"trade_time_begin"),function(t){return 1*getSecondsFromTradeTime(t)})[0],o.trade_time_end=S._.sortBy(this.getMergedInfoArray(e,"trade_time_end"),function(t){return-1*getSecondsFromTradeTime(t)})[0];var c=S._.uniq(this.getMergedInfoArray(e,"trade_date_final"));1!=c.length||S._.isNull(c[0])||(o.trade_date_final=c[0]);var s=S._.uniq(this.getMergedInfoArray(e,"trade_time_final"));1!=s.length||S._.isNull(s[0])||(o.trade_time_final=s[0]),this.set("contract_info",o),this.set("prices",this.getMergedPrices(t,r))},loadDateShift:function(t,e){var n=t.get("contract_info").trade_date_final,i=e.get("contract_info").trade_date_final,r=(1*new Date(i)-1*new Date(n))/864e5,a=r>=0?"+"+r+"days":r+"days",o={en:"("+t.get("contract_info").name.en+")"+a,cht:"("+t.get("contract_info").name.cht+")"+a},c=S._.clone(t.get("contract_info"));c.name=o,c.trade_date_begin=getTradeDateByDateShift(c.trade_date_begin,r),c.trade_date_end=getTradeDateByDateShift(c.trade_date_end,r),c.trade_date_final=getTradeDateByDateShift(c.trade_date_final,r);var s=new S.Prices;t.get("prices").each(function(t){var e=new S.Price(t.toJSON());e.set("trade_date",getTradeDateByDateShift(e.get("trade_date"),r)),s.add(e)}),this.set("contract_info",c),this.set("prices",s)}}),S.Contracts=S.Collection2.extend({model:S.Contract}),S.Discussion=S.B.Model.extend({defaults:{contracts:null},initialize:function(){this.set("contracts",new S.Contracts)},_addContract:function(t){this.get("contracts").add(t)},addContract:function(){if(arguments.length<=0)return null;var t=this,e=null,n=arguments[0];switch(n){case S.AC_NATIVE:var i=arguments[1];e=new S.Contract,e.loadNative(i)&&this._addContract(e);break;case S.AC_CLONE:var r=arguments[1],a=this.getContract(r);S._.isNull(a)||(e=new S.Contract,e.loadCloned(a),this._addContract(e));break;case S.AC_INDICATOR:var r=arguments[1],o=arguments[2],c=arguments[3],a=this.getContract(r);S._.isNull(a)||(e=new S.Contract,e.loadIndicator(a,o,c),this._addContract(e));break;case S.AC_MERGE:var s=arguments[1],d=arguments[2];if(!S._.isArray(s)||!S._.isArray(d))break;var _=S._.reduce(d,function(e,n){var i=n.tag;return e&&!S._.isUndefined(i)&&!S._.isNull(t.getContract(i))},!0);if(_){var l=S._.map(d,function(e){return{contract:t.getContract(e.tag),factor:S._.isNumber(e.factor)?e.factor:1,fields:S._.isArray(e.fields)?e.fields:s}}),u=S._.uniq(S._.map(l,function(t){return t.contract.get("contract_info").tick_length}));1==u.length&&(e=new S.Contract,e.loadMerged(s,l),this._addContract(e))}break;case S.AC_DATESHIFT:var f=arguments[1],h=arguments[2],g=this.getContract(f),m=this.getContract(h);S._.isNull(g)||S._.isNull(m)||S._.isUndefined(g.get("contract_info").trade_date_final)||S._.isUndefined(m.get("contract_info").trade_date_final)||/^(1S|15S|1M|2M|3M|5M|10M|15M|20M|30M|60M|1D)$/.test(g.get("contract_info").tick_length)&&(e=new S.Contract,e.loadDateShift(g,m),this._addContract(e))}return e},getContract:function(t){var e=this.get("contracts").getModelByTag(t);return S._.isUndefined(e)&&(e=null),e}}),S.ContractView=S.B.View.extend({isValid:function(){return!S._.isUndefined(this.model)},tagName:"li",className:"contract lighten",events:{click:"showContractWindow"},initialize:function(){this.render()},render:function(){var t=this.model.get("tag"),e=this.model.get("contract_info").name.en+" "+this.model.get("contract_info").tick_length;this.$el.html(t),this.$el.attr("title",e),this.$el.tooltip({position:{my:"left+30 top+30"},track:!0,show:{duration:"fast"},hide:{effect:"hide"},content:function(){return $(this).attr("title")}})},showContractWindow:function(){console.log("showContractWindow(): "+this.model.get("contract_info").name.cht)}}),S.DiscussionView=S.B.View.extend({isValid:function(){return!S._.isUndefined(this.model)},tagName:"div",className:"sfo-main",initialize:function(){this.render(),this.listenTo(this.model.get("contracts"),"add",this.addContractView)},render:function(){var t=this;this.$main=this.$el;var e=$('<div class="inliner">');this.$charts=$('<div class="charts" id="charts">'),this.$contracts=$('<ol class="contracts">'),this.$transactions=$('<ol class="transactions">'),e.append(this.$contracts),e.append(this.$transactions),this.$main.append(e),this.$main.append(this.$charts),this.$tabs=$('<ul id="tabs">'),this.$charts.append(this.$tabs),this.$charts.tabs(),this.$charts.find(".chart").css("padding","0px"),this.$charts.find(".ui-tabs-nav").sortable({axis:"x",stop:function(){t.$charts.tabs("refresh")}})},addContractView:function(t){var e=new S.ContractView({model:t});this.$contracts.append(e.$el)}}),S.init_layout=function(){var pstyle="margin: 5px; padding: 5px; font-family: Verdana,Arial,sans-serif; font-size: 11px; border: 1px solid #a6c9e2; background: #fcfdfd; color: #222222; border-radius: 5px;";$("#sfo-layout").w2layout({name:"sfo-layout",padding:1,resizer:3,panels:[{type:"top",minSize:450,size:"70%",resizable:!0,style:pstyle},{type:"main",minSize:150,size:"100%",resizable:!0,style:pstyle}]}),S.layout=S.w2ui["sfo-layout"],S.main_frame=S.$(S.layout.el("top")),S.shell_frame=S.$(S.layout.el("main")),S.discussion_view=new S.DiscussionView({model:S.discussion});var main_div=S.discussion_view.$el;S.main_frame.append(main_div);var shell_div=$('<div class="sfo-shell">');S.shell_frame.append(shell_div);var shell_controller=shell_div.console({promptLabel:"SFO> ",commandHandle:function(line){try{var ret=eval(line);return"undefined"!=typeof ret?ret.toString():!0}catch(err){return[{msg:err.toString(),className:"jquery-console-message-error"}]}},autofocus:!0,animateScroll:!0,promptHistory:!0,welcomeMessage:"Enter some JavaScript expressions to evaluate."})},S.init=function(){try{S.discussion=new S.Discussion,S.init_layout()}catch(t){alert(t)}},this.S=S}();